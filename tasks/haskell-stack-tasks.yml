- name: Install common Haskell build dependencies
  remote_user: administrator
  become: yes
  become_method: sudo
  apt: name={{ item }}
  with_items:
    - libpcre3-dev
    - libsqlite3-dev
    - libpq-dev
    - pkg-config
  tags:
    - haskell-build-dependencies

- name: Add FPCO Deb Key
  apt_key: url=https://s3.amazonaws.com/download.fpcomplete.com/debian/fpco.key state=present
  when: ansible_distribution == "Debian"

- name: Add FPCO Deb Key
  apt_key: url=https://s3.amazonaws.com/download.fpcomplete.com/ubuntu/fpco.key state=present
  when: ansible_distribution == "Ubuntu"

- name: Add FPCO Deb repository
  apt_repository: repo='deb http://download.fpcomplete.com/debian/jessie stable main' state=present
  when: ansible_distribution_release == "jessie"

- name: Add FPCO Deb repository
  apt_repository: repo='deb http://download.fpcomplete.com/ubuntu trusty main' state=present
  when: ansible_distribution_release == "trusty"

- name: Install Stack package
  apt: name=stack state=present update_cache=yes
